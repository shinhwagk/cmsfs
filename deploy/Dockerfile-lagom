FROM cmsfs/oraclejdk8

ARG SVC_NAME

ADD cmsfs/${SVC_NAME}/impl/target/universal/stage /opt/cmsfs/
ADD logback.xml /opt/logback.xml
ADD register.sh /usr/local/bin/register.sh
add entrypoint.sh /usr/local/bin/entrypoint.sh

EXPOSE 9000

RUN ln -s /opt/cmsfs/bin/${SVC_NAME}-impl /usr/local/bin/app.sh

RUN ls -l /usr/local/bin/
RUN chmod +x /usr/local/bin/register.sh
RUN chmod +x /usr/local/bin/entrypoint.sh


ENTRYPOINT ["entrypoint.sh"]


CMD ["-Dplay.crypto.secret=abcdefghijk", "-Dlogger.file=/opt/logback.xml"]
